doctype html
html
  head
    title Become an Eporia Artist | Creator Portal
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    //- Google Fonts & Icons
    link(rel='stylesheet', href='https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap')
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css")
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css")
    
    //- ONE Single Stylesheet for this page
    link(rel='stylesheet' href='/stylesheets/onboardingStyle.css')

  body
    .onboarding-page-wrapper
      //- Header (3-Column Layout)
      header.onboarding-nav.mobile-refined-nav
        .nav-left
            a.back-link(href="/") 
                i.fas.fa-arrow-left
                span Home
        .nav-center
            .brand-stack
                .brand EPORIA 
                span.mode-badge ARTIST PORTAL
        .nav-right
            a.artist-login-link(href="/artist/login")
                span.login-text-muted Already joined? 
                span.highlight Log In
      
      //- Main Form Card
      main.onboarding-window
        .step-indicator
          .step.active(data-step="1") Identity
          .step(data-step="2") Visuals
          .step(data-step="3") Music Profile
          .step(data-step="4") Goals
        
        form#artistOnboardingForm
        
          //- ==========================================
          //- STEP 1: IDENTITY
          //- ==========================================
          section.step-content#step1
            h1 Artist Identity
            p.subtitle This is how you will appear in search and on your profile.
            
            .input-group
              label Public Artist Name *
              input(type="text" name="artistName" placeholder="e.g. Neon Echoes" required)
            
            .grid-2
              .input-group
                label Primary Location
                input(type="text" name="location" placeholder="e.g. San Diego, CA" autocomplete="off")
              .input-group
                label Public Handle
                .handle-wrapper
                  span.handle-prefix @
                  input(type="text" name="handle" placeholder="neonechoes" required)
                  span.validation-icon
                p.helper-text(style="font-size:0.8rem; opacity:0.6; margin-top:5px") This can be different from your user username.
            
            .input-group
              label Artist Bio *
              textarea(name="bio" rows="4" placeholder="Tell your fans about your journey...")

            //- Centered Button Row (Consistent with other steps)
            .btn-centered-row
                button.btn-next(type="button" onclick="nextStep()") Continue

          //- ==========================================
          //- STEP 2: VISUALS (Mobile Optimized)
          //- ==========================================
          section#step2.onboarding-step.hidden
            //- [CRITICAL] Hidden Input for File Upload
            input#artistFileInput(type="file" accept="image/*" style="display:none")
            
            .step-header
              h1 Artist Visuals
              p Set the aesthetic for your profile. 
            
            .visuals-container-centered
              //- 1. Avatar Section
              .avatar-upload-block
                 label Profile Photo
                 .avatar-preview-wrapper(onclick="triggerUpload('avatar')")
                   img#avatarPreview(src="/images/default-artist.jpg" onerror="this.src='https://via.placeholder.com/150'")
                   .upload-overlay: i.fas.fa-camera
                 p.upload-hint Tap to change

              //- 2. Banner Section
              .banner-upload-block
                 label Profile Banner
                 .banner-preview-wrapper(onclick="triggerUpload('banner')")
                   img#bannerPreview(src="/images/default-banner.jpg" onerror="this.src='https://via.placeholder.com/600x200'")
                   .upload-overlay: i.fas.fa-image
                 p.upload-hint Recommended: 1500x500px

            //- Centered Button Row
            .btn-centered-row
              button.btn-back(type="button" onclick="prevStep()") Back
              button.btn-next(type="button" onclick="nextStep()") Continue

          //- ==========================================
          //- STEP 3: MUSIC PROFILE (Mobile Optimized)
          //- ==========================================
          section.step-content.hidden#step3
            .step-header
                h1 Define Your Sound
                p.subtitle This data powers our recommendation engine.
            
            //- Use centered container with extra spacing
            .visuals-container-centered(style="gap: 25px")
                
                //- PRIMARY GENRE (The fixed dropdown)
                .input-group(style="width: 100%")
                  label(style="text-align:center; display:block; margin-bottom:10px") Primary Genre
                  select#primaryGenre(name="primaryGenre" onchange="renderSubgenres()")
                    option(value="" disabled selected) Select a Genre...
                    option(value="electronic") Electronic
                    option(value="hip_hop") Hip Hop
                    option(value="rock") Rock
                    option(value="pop") Pop
                    option(value="rnb") R&B / Soul
                    option(value="jazz") Jazz
                    option(value="classical") Classical
                    option(value="global") Global / World
                
                //- SUBGENRES (Chips)
                .input-group(style="width: 100%")
                  label(style="text-align:center; display:block; margin-bottom:10px") Subgenres (Select up to 3)
                  .chip-grid#subgenreGrid
                     //- Populated by JS
                  p.helper-text(style="font-size: 0.8rem; text-align: center; margin-top: 10px; color:var(--text-muted)") Select a primary genre above to see styles.

                //- MOODS (Grid)
                .input-group(style="width: 100%; margin-top: 10px;")
                  label(style="text-align:center; display:block; margin-bottom:15px") Mood Profiles
                  .mood-grid
                    label.mood-pill
                      input(type="checkbox" name="moodIds" value="chill")
                      span Chill
                    label.mood-pill
                      input(type="checkbox" name="moodIds" value="energetic")
                      span Energetic
                    label.mood-pill
                      input(type="checkbox" name="moodIds" value="party")
                      span Party
                    label.mood-pill
                      input(type="checkbox" name="moodIds" value="focus")
                      span Focus
                    label.mood-pill
                      input(type="checkbox" name="moodIds" value="moody")
                      span Moody
                    label.mood-pill
                      input(type="checkbox" name="moodIds" value="workout")
                      span Workout

            //- Centered Buttons
            .btn-centered-row
                button.btn-back(type="button" onclick="prevStep()") Back
                button.btn-next(type="button" onclick="nextStep()") Continue

          //- ==========================================
          //- STEP 4: GOALS & LEGAL (Mobile Optimized)
          //- ==========================================
          section.step-content.hidden#step4
            h1 Review & Launch
            p.subtitle Finalize your profile setup.
            
            .visuals-container-centered(style="gap: 25px")
                //- 1. Goals Selection
                .input-group(style="width: 100%")
                  label Dashboard Focus
                  p.helper-text(style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 10px") What features do you want enabled immediately?
                  
                  .checkbox-card-group
                    label.checkbox-card
                      input(type="checkbox" name="goals" value="merch")
                      .card-content
                        i.fas.fa-tshirt
                        span Sell Merch
                    
                    label.checkbox-card
                      input(type="checkbox" name="goals" value="tips")
                      .card-content
                        i.fas.fa-coins
                        span Receive Tips
                    
                //- 2. LEGAL AGREEMENT
                .legal-box(style="background: rgba(0,0,0,0.03); padding: 20px; border-radius: 15px; border: 1px solid var(--border-color); width: 100%")
                  label.checkbox-line(style="display: flex; gap: 15px; align-items: flex-start; cursor: pointer")
                    input#legalCheck(type="checkbox" name="legalAgreement" style="width: 20px; height: 20px; margin-top: 3px")
                    div
                      span(style="font-weight: 700; font-size: 0.95rem; color: var(--text-main)") I certify that I own rights to this content.
                      p(style="font-size: 0.85rem; opacity: 0.7; margin-top: 5px; color: var(--text-main); line-height: 1.4") 
                        | I understand that uploading copyrighted music without permission will result in immediate account termination. 
                        | I agree to Eporia's #[a(href="/terms" target="_blank" style="color: var(--primary)") Terms of Service] and #[a(href="/creator_agreement" target="_blank" style="color: var(--primary)") DMCA Policy].

            //- Centered Buttons
            .btn-centered-row
                button.btn-back(type="button" onclick="prevStep()") Back
                //- The JS handles the final submit on this button
                button.btn-next.btn-submit-final(type="button" onclick="nextStep()") Finish & Launch

    //- GLOBAL FOOTER
    footer.footer
      .container
        .footer-grid
          .footer-brand
            .brand(style="margin-bottom:20px") EPORIA
            p The new blueprint for music independence. Join the movement to fund the future of sound.
            .social-links(style="margin-top:20px")
              a(href="#" style="margin-right:15px") #[i.fab.fa-instagram]
              a(href="#") #[i.fab.fa-discord]
          
          .footer-links
            h4 Platform
            ul
              li: a(href="/#how-it-works") How it Works
              li: a(href="/#experience") Discover
              li: a(href="/artist") For Artists
              
          .footer-links
            h4 Company
            ul
              li: a(href="#") About Us
              li: a(href="#") Careers
              li: a(href="#") Press Kit
              li: a(href="/#contact") Contact
              
          .footer-links
            h4 Legal
            ul
              li: a(href="#") Privacy Policy
              li: a(href="/terms") Terms of Service
              li: a(href="/creator_agreement") Creator Agreement
              li: a(href="#") Cookie Policy

        .footer-bottom
          p &copy; 2025 Eporia Music. All rights reserved.
          p.made-by Fueling the Vision.

    //- CROPPER MODAL
    #cropModal.modal-overlay
      .crop-modal
        .modal-header
          h2 Adjust Image
          p.subtitle(style="margin-bottom:0") Drag to position and crop.
        
        .crop-area
          img#imageToCrop(src="")
        
        .modal-actions
          button.btn-back(onclick="cancelCrop()") Cancel
          button.btn-next(onclick="saveCrop()") Save & Upload

    //- SCRIPTS
    script(src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js")
    script(type="module" src="/javascripts/artistSignup.js")