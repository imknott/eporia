//- views/dashboard.pug
extends player_shell

block content
  .content-scroll(data-page="dashboard")
    
    //- 1. CONTEXT HERO
    .scene-hero
      .scene-header-row
        div
            h1.scene-title #{userLocation.city} Underground
            p.scene-subtitle Pulse of #{userLocation.state} â€¢ #{activeCount || 128} Active Listeners
        
        //- The "Teleport" Button
        button.btn-change-city(onclick="openCitySearch()")
            i.fas.fa-map-marker-alt
            span Change City

    //- 2. FRESH DROPS (The "New Arrivals" Bin)
    section.feed-section
      .section-header
        h3 Fresh Drops
        span.badge-live Live
      
      .scroll-row#localDropsContainer
        //- Populated by JS
        .media-card.skeleton-box(style="min-width:160px; height:200px")
        .media-card.skeleton-box(style="min-width:160px; height:200px")
        .media-card.skeleton-box(style="min-width:160px; height:200px")

    //- 3. COMMUNITY CRATES (The "Staff Picks" Shelf)
    section.feed-section
      .section-header
        h3 Community Crates
        p.section-desc Hand-picked collections from #{userLocation.city} locals.
      
      .scroll-row#localCratesContainer
        //- Populated by JS
        .media-card.skeleton-box(style="min-width:160px; height:200px")
        .media-card.skeleton-box(style="min-width:160px; height:200px")

    //- 4. ARTIST SPOTLIGHT (The "Who's Playing Tonight" Board)
    section.feed-section
      .section-header
        h3 Active Artists
      
      .artist-circle-row#localArtistsContainer
         .artist-circle.skeleton-box(style="width:100px; height:100px; border-radius:50%")
         .artist-circle.skeleton-box(style="width:100px; height:100px; border-radius:50%")

    div(style="height: 120px")