extends player_shell

block content
  .content-scroll(data-page="dashboard")
    
    //- 1. CONTEXT HERO
    .scene-hero
      .scene-header-row
        div
            h1.scene-title #{userLocation.city} Underground
            p.scene-subtitle Pulse of #{userLocation.state}
        
        //- The "Explore" Button
        button.btn-change-city(onclick="window.openCitySearch ? window.openCitySearch() : alert('Map loading...')")
            i.fas.fa-compass
            span Explore Somewhere New
    
    //- 2. CITY PILLS (Quick Navigation)
    section.city-pills-section
      .city-pills-container#cityPillsContainer
        //- Populated by JS with active cities

    //- 3. FRESH DROPS (The "New Arrivals" Bin)
    section.feed-section
      .section-header
        h3 Fresh Drops
        span.badge-live Live
      
      .scroll-row#localDropsContainer
        //- Populated by JS
        .media-card.skeleton-box(style="min-width:160px; height:200px")
        .media-card.skeleton-box(style="min-width:160px; height:200px")
        .media-card.skeleton-box(style="min-width:160px; height:200px")

    //- 4. FOR YOU (Genre-Matched Artists)
    section.feed-section#forYouSection(style="display:none")
      .section-header
        h3 For You
        p.section-desc Artists matching your taste
      
      .artist-circle-row#forYouArtistsContainer
         .artist-circle.skeleton-box(style="width:100px; height:100px; border-radius:50%")
         .artist-circle.skeleton-box(style="width:100px; height:100px; border-radius:50%")

    //- 5. COMMUNITY CRATES (The "Staff Picks" Shelf)
    section.feed-section
      .section-header
        h3 Community Crates
        p.section-desc Hand-picked collections from #{userLocation.city} locals.
      
      .scroll-row#localCratesContainer
        //- Populated by JS
        .media-card.skeleton-box(style="min-width:160px; height:200px")
        .media-card.skeleton-box(style="min-width:160px; height:200px")

    //- 6. ARTIST SPOTLIGHT (The "Who's Playing Tonight" Board)
    section.feed-section
      .section-header
        h3 Active Artists
      
      .artist-circle-row#localArtistsContainer
         .artist-circle.skeleton-box(style="width:100px; height:100px; border-radius:50%")
         .artist-circle.skeleton-box(style="width:100px; height:100px; border-radius:50%")

    div(style="height: 120px")
